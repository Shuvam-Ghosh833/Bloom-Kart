<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Component Details</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }

  button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    background-color: #007bff;
    color: white;
  }

  button:hover {
    background-color: #0056b3;
  }

  #dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #f9f9f9;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: none;
  }

  input[type="text"],
  input[type="number"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
  }

  input[type="text"]:focus,
  input[type="number"]:focus {
    outline: none;
    border-color: #007bff;
  }

  button.dialog-button {
    width: 100%;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
  }

  button.dialog-button:hover {
    background-color: #0056b3;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: left;
  }

  th {
    background-color: #f2f2f2;
  }
</style>
</head>
<body>
  <button onclick="showDialog()">Add</button>
  <button onclick="showComponents()">Show</button>
  <button onclick="updateComponent()">Update</button>
  <button onclick="deleteComponent()">Delete</button>

  <div id="dialog">
    <input type="text" id="name" placeholder="Name">
    <input type="text" id="manufacturer" placeholder="Manufacturer">
    <input type="number" id="price" placeholder="Price">
    <button class="dialog-button" onclick="addComponent()">Add Component</button>
  </div>

  <div id="componentListContainer">
    <table id="componentList">
      <thead>
        <tr>
          <th>Name</th>
          <th>Manufacturer</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let db;
  
    const dbName = 'componentDB';
    const dbVersion = 1;
  
    const request = indexedDB.open(dbName, dbVersion);
  
    request.onerror = function(event) {
      console.error("Database error: " + event.target.errorCode);
    };
  
    request.onsuccess = function(event) {
      db = event.target.result;
    };
  
    request.onupgradeneeded = function(event) {
      const db = event.target.result;
      const objectStore = db.createObjectStore('components', { keyPath: ['name', 'manufacturer'] });
      objectStore.createIndex('price', 'price', { unique: false });
    };
  
    function showDialog() {
      document.getElementById('dialog').style.display = 'block';
    }
  
    function addComponent() {
      const name = document.getElementById('name').value;
      const manufacturer = document.getElementById('manufacturer').value;
      const price = parseFloat(document.getElementById('price').value);
  
      const transaction = db.transaction(['components'], 'readwrite');
      const objectStore = transaction.objectStore('components');
  
      const request = objectStore.add({ name, manufacturer, price });
  
      request.onsuccess = function(event) {
        console.log('Component added successfully');
        document.getElementById('dialog').style.display = 'none';
      };
  
      request.onerror = function(event) {
        console.error('Error adding component: ', event.target.error);
      };
    }
  
    function showComponents() {
      const transaction = db.transaction(['components'], 'readonly');
      const objectStore = transaction.objectStore('components');
      const componentList = document.getElementById('componentList').getElementsByTagName('tbody')[0];
      componentList.innerHTML = '';
  
      objectStore.openCursor().onsuccess = function(event) {
        const cursor = event.target.result;
        if (cursor) {
          const rowData = cursor.value;
          const row = componentList.insertRow();
          const nameCell = row.insertCell(0);
          const manufacturerCell = row.insertCell(1);
          const priceCell = row.insertCell(2);
  
          nameCell.textContent = rowData.name;
          manufacturerCell.textContent = rowData.manufacturer;
          priceCell.textContent = `$${rowData.price}`;
  
          cursor.continue();
        }
      };
    }
  
    function updateComponent() {
      const name = prompt('Enter component name:');
      const manufacturer = prompt('Enter component manufacturer:');
      const price = parseFloat(prompt('Enter new price:'));
  
      const transaction = db.transaction(['components'], 'readwrite');
      const objectStore = transaction.objectStore('components');
  
      const getRequest = objectStore.get([name, manufacturer]);
  
      getRequest.onsuccess = function(event) {
        const data = event.target.result;
        if (data) {
          data.price = price;
  
          const putRequest = objectStore.put(data);
  
          putRequest.onsuccess = function(event) {
            console.log('Component updated successfully');
          };
  
          putRequest.onerror = function(event) {
            console.error('Error updating component: ', event.target.error);
          };
        } else {
          console.error('Component not found');
        }
      };
  
      getRequest.onerror = function(event) {
        console.error('Error retrieving component: ', event.target.error);
      };
    }
  
    function deleteComponent() {
      const name = prompt('Enter component name:');
      const manufacturer = prompt('Enter component manufacturer:');
  
      const transaction = db.transaction(['components'], 'readwrite');
      const objectStore = transaction.objectStore('components');
  
      const request = objectStore.delete([name, manufacturer]);
  
      request.onsuccess = function(event) {
        console.log('Component deleted successfully');
      };
  
      request.onerror = function(event) {
        console.error('Error deleting component: ', event.target.error);
      };
    }
  </script>
  
</body>
</html>


